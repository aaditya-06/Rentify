<% layout('Layouts/Boilerplate') %>
<body>
  <div class="container-fluid bg-white py-3">
    <div class="d-flex overflow-auto gap-4 px-3">
      <!-- Filter Item -->
      <div class="text-center hover-filter">
        <i class="fa-solid fa-water-ladder fs-5"></i>
        <div class="small">Pools</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-mountain-sun fs-5"></i>
        <div class="small">Nature</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-house-chimney fs-5"></i>
        <div class="small">Villas</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-campground fs-5"></i>
        <div class="small">Camping</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-city fs-5"></i>
        <div class="small">City</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-umbrella-beach fs-5"></i>
        <div class="small">Beach</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-snowflake fs-5"></i>
        <div class="small">Snow</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-fire fs-5"></i>
        <div class="small">Trending</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-cow fs-5"></i>
        <div class="small">Farm</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-chess-rook fs-5"></i>
        <div class="small">Castle</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-mug-hot fs-5"></i>
        <div class="small">Coffee</div>
      </div>

      <div class="text-center hover-filter">
        <i class="fa-solid fa-mountain-city fs-5"></i>
        <div class="small">Mountain</div>
      </div>
    </div>
  </div>

  <div class="container my-4">
    <div
      class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-3"
    >
      <h2 class="display-5 text-center text-md-start mb-2 mb-md-0">Stays</h2>

      <div class="form-check form-switch d-flex align-items-center gap-2">
        <input
          class="form-check-input"
          type="checkbox"
          role="switch"
          id="switchCheckDefault"
        />
        <label
          class="form-check-label small text-muted"
          for="switchCheckDefault"
        >
          Display total before tax
        </label>
      </div>
    </div>
    <hr />
  </div>

  <div class="container mb-5">
    <div class="row">
      <% for(let listing of allListings) { %>
      <div class="col-md-4 mb-4 d-flex">
        <a
          href="/listings/<%= listing._id %>"
          class="text-decoration-none w-100"
        >
          <div
            class="card h-100 shadow-sm d-flex flex-column"
            style="min-height: 600px"
          >
            <img
              src="<%= listing.image.url %>"
              class="card-img-top img-fluid"
              alt="Listing Image"
              style="height: 450px; object-fit: cover"
            />

            <div class="card-body flex-grow-1 d-flex flex-column">
              <div class="text-muted fw-bold"><%= listing.title %></div>
              <p class="card-text fw-light line-clamp-3">
                <%= listing.description %>
              </p>
              <!-- <div class="mt-auto text-muted fw-bold">
                <%= (listing.price ?
                listing.price.toLocaleString("en-IN") : "N/A") %> /night
              </div> -->
              <% const price = listing.price; const gstAmount = Math.round(price
              * 0.18); // 18% GST rounded to nearest Rupee %>

              <p class="price">
                ₹<%= price.toLocaleString("en-IN") %> /night
                <span class="gst-note text-muted" style="display: none">
                  + ₹<%= gstAmount.toLocaleString("en-IN") %> GST
                </span>
              </p>

              <small class="text-secondary">
                Location: <%= listing.location %>, <%= listing.country %>
              </small>
            </div>
          </div>
        </a>
      </div>
      <% } %>
    </div>
  </div>
</body>
